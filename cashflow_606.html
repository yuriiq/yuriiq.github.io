<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор 606</title>
</head>
<body>
    <div class="container">
        <h1>Калькулятор 606</h1>
        <p id="goal_ok">Цель достигнута!</p>
        <form id="game-form">
            <div class="section">
                <h2>Доходы</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Тип дохода</th>
                            <th>Базовый доход</th>
                            <th>Прирост +$</th>
                            <th>Прирост +%</th>
                            <th>Итого</th>
                        </tr>
                    </thead>
                    <tbody id="income-table">
                        <tr>
                            <td><input type="text"   class="title"    name="job-title" placeholder="Активный доход"></td>
                            <td><input type="number" class="base"     name="starting-salary"></td>
                            <td><input type="number" class="extra"    name="extra-income"></td>
                            <td>
                                <select class="increase" name="training-increase">
                                    <option class="training-work"></option>
                                    <option class="training-self"></option>
                                    <option class="training-startup"></option>
                              </select>
                            </td>
                            <td><input type="number" class="final"    name="final-salary" readonly disabled></td>
                        </tr>
                        <tr>
                            <td><input type="text"   class="title"    name="job2-title" placeholder="Второй активный доход" id="job2-title"></td>
                            <td><input type="number" class="base"     name="job2" id="job2"></td>
                            <td><input type="number" class="extra"    name="job2-extra-income" id="job2-extra-income"></td>
                            <td>
                                <select class="increase" name="job2-training-increase" id="job2-training-increase">
                                    <option class="training-work"></option>
                                    <option class="training-self"></option>
                                    <option class="training-startup"></option>
                              </select>
                            </td>
                            <td><input type="number" class="final"    name="final-job2" readonly disabled></td>
                        </tr>
                        <tr>
                            <td><input type="text"   class="title"    name="static-passive-title" placeholder="Пассивный доход"></td>
                            <td><input type="number" class="base"     name="static-passive"></td>
                            <td><input type="number" class="extra"    name="static-passive-extra-income"></td>
                            <td>
                                <select class="increase" name="static-passive-training-increase">
                                    <option class="training-work"></option>
                                    <option class="training-self"></option>
                                    <option class="training-startup"></option>
                              </select>
                            </td>
                            <td><input type="number" class="final"  name="static-passive-final" readonly disabled></td>
                        </tr>
                        <tr id="addIncome">
                            <td colspan="4"><button type="button" onclick="addNewIncome()">Добавить новый источник дохода</button></td>
                            <td><input type="hidden" id="total-income-counter" name="total-income-counter" readonly></td>
                        </tr>
                    </tbody>
                </table>
                <div class="total">
                    <label for="total-income-counter">Всего от пассивных источников дохода:</label>
                    <input type="number" id="total-passive-income" name="total-passive-income" readonly disabled>
                </div>
                <div class="total">
                    <label for="total-income">Общий доход из всех источников:</label>
                    <input type="number" id="total-income" name="total-income" readonly disabled>
                </div>
            </div>
            
            <div class="section">
                <h2>Расходы</h2>
                <table>
                    <tr>
                        <td colspan="4">
                            <input type="radio" name="status" id="student" value="student" checked>
                            <label for="student" class="btn">Студент</label>
                            <input type="radio" name="status" id="worker" value="worker">
                            <label for="worker" class="btn">Рабочий</label>
                        </td>
                    </tr>
                    <tr>
                        <td>Жильё</td>
                        <td>
                            <div>
                                <input type="radio" name="rent" id="rent-extra" value="2">
                                <label for="rent-extra" class="btn">200%</label>
                                <input type="radio" name="rent" id="rent-full" value="1" checked>
                                <label for="rent-full" class="btn">100%</label>
                                <input type="radio" name="rent" id="rent-discount" value="0.5">
                                <label for="rent-discount" class="btn">50%</label>
                                <input type="radio" name="rent" id="rent-zero" value="0">
                                <label for="rent-zero" class="btn">0%</label>
                            </div>
                        </td>
                        <td><div class="inline" id="rent-price">200</div>$</td>
                        <td><input type="number" id="rent" name="rent-total" readonly disabled></td>
                        
                    </tr>
                    <tr>
                        <td>Еда</td>
                        <td>
                            <div>
                                <input type="radio" name="food" id="food-extra" value="2">
                                <label for="food-extra" class="btn">200%</label>
                                <input type="radio" name="food" id="food-full" value="1" checked>
                                <label for="food-full" class="btn">100%</label>
                                <input type="radio" name="food" id="food-discount" value="0.5">
                                <label for="food-discount" class="btn">50%</label>
                                <input type="radio" name="food" id="food-zero" value="0">
                                <label for="food-zero" class="btn">0%</label>
                            </div>
                        </td>
                        <td><div class="inline" id="food-price">120</div>$</td>
                        <td><input type="number" id="food" name="food-total" readonly disabled></td>
                    </tr>
                    <tr>
                        <td>Связь</td>
                        <td>
                            <div>
                                <input type="radio" name="internet" id="internet-extra" value="2">
                                <label for="internet-extra" class="btn">200%</label>
                                <input type="radio" name="internet" id="internet-full" value="1" checked>
                                <label for="internet-full" class="btn">100%</label>
                                <input type="radio" name="internet" id="internet-discount" value="0.5">
                                <label for="internet-discount" class="btn">50%</label>
                                <input type="radio" name="internet" id="internet-zero" value="0">
                                <label for="internet-zero" class="btn">0%</label>
                            </div>
                        </td>
                        <td><div class="inline" id="internet-price">10</div>$</td>
                        <td><input type="number" id="internet" name="internet" readonly disabled></td>
                    </tr>
                    <tr>
                        <td>Проезд</td>
                        <td>
                            <div>
                                <input type="radio" name="transport" id="transport-extra" value="2">
                                <label for="transport-extra" class="btn">200%</label>
                                <input type="radio" name="transport" id="transport-full" value="1" checked>
                                <label for="transport-full" class="btn">100%</label>
                                <input type="radio" name="transport" id="transport-discount" value="0.5">
                                <label for="transport-discount" class="btn">50%</label>
                                <input type="radio" name="transport" id="transport-zero" value="0">
                                <label for="transport-zero" class="btn">0%</label>
                            </div>
                        </td>
                        <td><div class="inline" id="transport-price">30</div>$</td>
                        <td><input type="number" id="transport" name="transport" readonly disabled></td>
                    </tr>
                    <tr>
                        <td rowspan="2">Дети</td>
                        <td>
                            <div>
                                <input type="radio" name="children" id="children-extra" value="2">
                                <label for="children-extra" class="btn">200%</label>
                                <input type="radio" name="children" id="children-full" value="1" checked>
                                <label for="children-full" class="btn">100%</label>
                                <input type="radio" name="children" id="children-discount" value="0.5">
                                <label for="children-discount" class="btn">50%</label>
                                <input type="radio" name="children" id="children-zero" value="0">
                                <label for="children-zero" class="btn">0%</label>
                            </div>
                        </td>
                        <td rowspan="2"><div class="inline" id="children-price">100</div>$</td>
                        <td rowspan="2"><input type="number" id="children" name="children" readonly disabled></td>
                    </tr>
                    <tr>
                        <td>
                            <div id="children-count">
                                <input type="radio" name="children-count" id="children-count-extra" value="3">
                                <label for="children-count-extra" class="btn"> 3 </label>
                                <input type="radio" name="children-count" id="children-count-full" value="2">
                                <label for="children-count-full" class="btn"> 2 </label>
                                <input type="radio" name="children-count" id="children-count-discount" value="1">
                                <label for="children-count-discount" class="btn"> 1 </label>
                                <input type="radio" name="children-count" id="children-count-zero" value="0" checked>
                                <label for="children-count-zero" class="btn"> 0 </label>
                            </div>
                        </td>
                    </tr>
                </table>
                <div class="total">
                    <label for="total-expenses">Итого расходов на жизнь:</label>
                    <input type="number" id="total-expenses" name="total-expenses" readonly disabled>
                </div>
            </div>
            
            <div class="section">
                <h2>Кредиты</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Тип организации</th>
                            <th>Сумма кредита</th>
                            <th>% годовых</th>
                            <th>% в месяц</th>
                            <th>Ежемесячный платеж</th>
                        </tr>
                    </thead>
                    <tbody id="loan-table">
                        <tr>
                            <td>Банк</td>
                            <td><input type="number" name="bank-loan" id="bank-loan"></td>
                            <td>36%</td>
                            <td>3%</td>
                            <td><input type="number" name="bank-monthly-payment" id="bank-payment" readonly disabled></td>
                        </tr>
                        <tr>
                            <td>Ростовщик</td>
                            <td><input type="number" name="lender-loan" class="lender-loan"></td>
                            <td>360%</td>
                            <td>30%</td>
                            <td><input type="number" name="lender-payment" class="lender-payment" readonly disabled></td>
                        </tr>
                        <tr id="addLoan">
                            <td colspan="4"><button type="button" onclick="addNewLoan()">Добавить новый кредит</button></td>
                            <td><input type="hidden" id="total-loan-counter" name="total-loan-counter" readonly></td>
                        </tr>
                    </tbody>
                </table>
                <div class="total">
                    <label for="total-loan-expenses">Итого расходов по кредитам:</label>
                    <input type="number" id="total-loan-expenses" name="total-loan-expenses" readonly disabled>
                </div>
            </div>
            
            <div class="section">
                <div class="total">
                    <label for="total-monthly-expenses">Всего расходов за месяц с учетом платежей по кредитам:</label>
                    <input type="number" id="total-monthly-expenses" name="total-monthly-expenses" readonly disabled>
                </div>
                <div class="total">
                    <label for="balance">Сальдо на конец месяца (все доходы минус все расходы):</label>
                    <input type="number" id="balance" name="balance" readonly disabled>
                </div>
            </div>
            <div class="section">
                <h2>Тренинги</h2>
                <table>
                    <thead>
                        <tr>
                            <th rowspan="2">Название</th>
                            <th colspan="3">Что даёт (+%)</th>
                        </tr>
                        <tr>
                            <th>Работа</th>
                            <th>Самозанятость</th>
                            <th>Стартапы</th>
                        </tr>
                    </thead>
                    <tbody id="training-table">
                        <tr id="addTraining">
                            <td colspan="3"><button type="button" onclick="addNewTraining()">Добавить новый тренинг</button></td>
                            <td><input type="hidden" id="total-training-counter" name="total-training-counter" readonly></td>
                        </tr>
                        <tr id="totalTraining">
                            <td>Итого:</td>
                            <td><input type="number" class=""  name="" id="total-work" readonly disabled></td>
                            <td><input type="number" class=""  name="" id="total-self" readonly disabled></td>
                            <td><input type="number" class=""  name="" id="total-startup" readonly disabled></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p> </p>
            <button id="clearCache" type="reset">Очистить всё</button>
            <p> </p>
        </form>
    </div>
</body>
<script>
    const incomeTableBody = document.getElementById('income-table');
    const loanTableBody = document.getElementById('loan-table');
    const trainingTableBody = document.getElementById('training-table');

    function saveFormData() {
        const form = document.getElementById('game-form')
        const formData = new FormData(form)
        const data = {}
        formData.forEach((value, key) => {
            data[key] = value
        })
        localStorage.setItem('formData', JSON.stringify(data))
    }
    
    function loadFormData() {
        const formData = JSON.parse(localStorage.getItem('formData'))
        if (formData) {
            createNewIncomeRows(formData['total-income-counter'])
            createNewLoanRows(formData['total-loan-counter'])
            createNewTrainingRows(formData['total-training-counter'])
            for (const key in formData) {
                const elements = document.getElementsByName(key)
                console.log(key, elements.length)
                for (i = 0; i < elements.length; ++i) {
                    const element = elements[i]
                    if (element) {
                        if (element.type === 'radio' || element.type === 'checkbox') {
                            if (element.value === formData[key]) {
                                element.checked = true
                            }
                        } else {
                            element.value = formData[key]
                        }
                    }
                }
            }
        }
    }

    function deleteIncomeRow(row) {
        incomeTableBody.removeChild(row)
        calculateTotals()
        saveFormData()
    }

    function addNewIncome() {
        const newRow = document.createElement('tr');
        const titleCell = document.createElement('td')
        const inputTitle = document.createElement('input')
        inputTitle.type = 'text'
        inputTitle.placeholder = 'Пассивный доход'
        inputTitle.className = 'title'
        inputTitle.name = 'passive-title' + incomeTableBody.rows.length
        titleCell.appendChild(inputTitle);
        newRow.appendChild(titleCell);
        // 
        const baseCell = document.createElement('td')
        const inputBase = document.createElement('input')
        inputBase.type = 'number'
        inputBase.className = 'base'
        inputBase.name = 'passive-base' + incomeTableBody.rows.length
        baseCell.appendChild(inputBase)
        newRow.appendChild(baseCell)
        // 
        const extraCell = document.createElement('td')
        const inputExtra = document.createElement('input')
        inputExtra.type = 'number'
        inputExtra.className = 'extra'
        inputExtra.name = 'passive-extra' + incomeTableBody.rows.length
        extraCell.appendChild(inputExtra)
        newRow.appendChild(extraCell)
        //
        const increaseCell = document.createElement('td')
        const selectIncrease = document.createElement('select')
        selectIncrease.className = 'increase'
        selectIncrease.name = 'passive-increase' + incomeTableBody.rows.length
        const optionWork = document.createElement('option')
        optionWork.className = "training-work"
        selectIncrease.appendChild(optionWork)
        const optionSelf = document.createElement('option')
        optionSelf.className = "training-self"
        selectIncrease.appendChild(optionSelf)
        const optionStartup = document.createElement('option')
        optionStartup.className = "training-startup"
        selectIncrease.appendChild(optionStartup)
        increaseCell.appendChild(selectIncrease)
        newRow.appendChild(increaseCell)
        //
        const finalCell = document.createElement('td')
        const inputFinal = document.createElement('input')
        inputFinal.readOnly = true
        inputFinal.disabled = true
        inputFinal.type = 'number'
        inputFinal.className = 'final'
        inputFinal.name = 'passive-final' + incomeTableBody.rows.length
        finalCell.appendChild(inputFinal)
        newRow.appendChild(finalCell)
        //
        incomeTableBody.appendChild(newRow);
        const addButton = document.getElementById("addIncome")
        incomeTableBody.appendChild(addButton);
    }

    function createNewIncomeRows(maximum) {
        for (i = incomeTableBody.rows.length; i <= maximum; ++i) {
            addNewIncome()
        }
    }

    function addNewTraining() {
        const newRow = document.createElement('tr');
        const titleCell = document.createElement('td')
        const inputTitle = document.createElement('input')
        inputTitle.type = 'text'
        inputTitle.className = 'title'
        inputTitle.name = 'training-title' + trainingTableBody.rows.length
        titleCell.appendChild(inputTitle);
        newRow.appendChild(titleCell);
        const classNames = ['work', 'self', 'startup' ]
        classNames.forEach(name => {
            const extraCell = document.createElement('td')
            const inputExtra = document.createElement('input')
            inputExtra.type = 'number'
            inputExtra.className = name
            inputExtra.name = 'training-' + name + trainingTableBody.rows.length
            extraCell.appendChild(inputExtra)
            newRow.appendChild(extraCell)
        })

        trainingTableBody.appendChild(newRow);
        const addButton = document.getElementById("addTraining")
        trainingTableBody.appendChild(addButton);
        const totalRow = document.getElementById("totalTraining")
        trainingTableBody.appendChild(totalRow);
    }

    function createNewTrainingRows(maximum) {
        for (i = trainingTableBody.rows.length; i <= maximum; ++i) {
            addNewTraining()
        }
    }

    function addNewLoan() {
        const newRow = document.createElement('tr');
        //
        const nameCell = document.createElement('td')
        nameCell.innerHTML = "Ростовщик"
        newRow.appendChild(nameCell)  
        //
        const inputCell = document.createElement('td')
        const inputTitle = document.createElement('input')
        inputTitle.type = 'number'
        inputTitle.className = 'lender-loan'
        inputTitle.name = 'lender-loan' + loanTableBody.rows.length
        inputCell.appendChild(inputTitle)
        newRow.appendChild(inputCell)
        //
        const annualCell = document.createElement('td')
        annualCell.innerHTML = "360%"
        newRow.appendChild(annualCell)
        //
        const monthlyCell = document.createElement('td')
        monthlyCell.innerHTML = "30%"
        newRow.appendChild(monthlyCell)
        //
        const outputCell = document.createElement('td')
        const inputPayment = document.createElement('input')
        inputPayment.type = 'number'
        inputPayment.disabled = true
        inputPayment.readOnly = true
        inputPayment.className = 'lender-payment'
        inputPayment.name = 'lender-payment' + loanTableBody.rows.length
        outputCell.appendChild(inputPayment)
        newRow.appendChild(outputCell)
        loanTableBody.appendChild(newRow)
        //
        const addButton = document.getElementById("addLoan")
        loanTableBody.appendChild(addButton)
    }

    function createNewLoanRows(maximum) {
        for (i = loanTableBody.rows.length; i <= maximum; ++i) {
            addNewLoan()
        }
    }

    function calculateIncomes() {
        const bases = document.getElementsByClassName("base")
        const extras = document.getElementsByClassName("extra")
        const increases = document.getElementsByClassName("increase")
        const finals = document.getElementsByClassName("final")
        let totalIncome = 0
        let totalPassiveIncome = 0

        if (bases.length == extras.length && increases.length == finals.length && bases.length == finals.length) {
            for (i = 0; i < bases.length; ++i) {
                const base = parseFloat(bases[i].value) || 0
                const extra = parseFloat(extras[i].value) || 0
                const increase = parseFloat(increases[i].value) || 0
                const final = (base + extra) * (1 + increase / 100)
                finals[i].value = final.toFixed(2)
                totalIncome += final
                if (i > 1) {
                    totalPassiveIncome += final
                }
            }
            document.getElementById("total-income").value = totalIncome.toFixed(2)
            document.getElementById("total-passive-income").value = totalPassiveIncome.toFixed(2)
            document.getElementById("total-income-counter").value = incomeTableBody.rows.length - 1
        } else {
            throw new Error("Wrong table scruct")
        }
        return totalIncome
    }

    function calculateTrainings() {
        const works = document.getElementsByClassName("work")
        const selfs = document.getElementsByClassName("self")
        const startups = document.getElementsByClassName("startup")
        let totalWork = 0
        let totalSelf = 0
        let totalStartup = 0
        if (works.length == selfs.length && startups.length == selfs.length) {
            for (i = 0; i < works.length; ++i) {
                totalWork += parseFloat(works[i].value) || 0
                totalSelf += parseFloat(selfs[i].value) || 0
                totalStartup += parseFloat(startups[i].value) || 0
            }
            document.getElementById("total-work").value = totalWork.toFixed(2)
            document.getElementById("total-self").value = totalSelf.toFixed(2)
            document.getElementById("total-startup").value = totalStartup.toFixed(2)
            document.getElementById("total-training-counter").value = trainingTableBody.rows.length - 1

            const trainingWorks = document.getElementsByClassName("training-work")
            for (i = 0; i < trainingWorks.length; ++i) {
                trainingWorks[i].value = totalWork
                trainingWorks[i].innerHTML = totalWork + "% Работа"
            }

            const trainingSelfs = document.getElementsByClassName("training-self")
            for (i = 0; i < trainingSelfs.length; ++i) {
                trainingSelfs[i].value = totalSelf
                trainingSelfs[i].innerHTML = totalSelf + "% Самозанятость"
            }

            const trainingStartups = document.getElementsByClassName("training-startup")
            for (i = 0; i < trainingStartups.length; ++i) {
                trainingStartups[i].value = totalStartup
                trainingStartups[i].innerHTML = totalStartup + "% Стартап"
            }

        } else {
            throw new Error("Wrong table scruct")
        }
    }

    function getSelectedValue(name) {
        const element = document.getElementsByName(name)
        for (i = 0, length = element.length; i < length; i++) {
            if (element[i].checked) {
                return element[i].value
            }
        }
    }

    function setStudent() {
        document.getElementById('rent-price').innerHTML = '30'
        document.getElementById('food-price').innerHTML = '120'
        document.getElementById('internet-price').innerHTML = '10'
        document.getElementById('transport-price').innerHTML = '20'
        document.getElementById('children-price').innerHTML = '100'
        document.getElementById('job2-title').value = 'Стипендия'
        document.getElementById('job2').value = 30
        document.getElementById('job2-extra-income').value = 0
        document.getElementById('job2-training-increase').value = 0
    }

    function setWorker() {
        document.getElementById('rent-price').innerHTML = '200'
        document.getElementById('food-price').innerHTML = '120'
        document.getElementById('internet-price').innerHTML = '10'
        document.getElementById('transport-price').innerHTML = '30'
        document.getElementById('children-price').innerHTML = '100'
    }

    function updateBaseExpenses() {
        const status = getSelectedValue("status")
        switch (status) {
            case 'student':
            setStudent()
            break
            case 'worker':
            setWorker()
            break
            default:
            throw new Error("Wrong status")
        }
    }

    function calculateExpenses() {
        const baseRent = parseFloat(document.getElementById("rent-price").innerHTML) || 0
        const baseFood = parseFloat(document.getElementById("food-price").innerHTML) || 0
        const baseInternet = parseFloat(document.getElementById("internet-price").innerHTML) || 0
        const baseTransport = parseFloat(document.getElementById("transport-price").innerHTML) || 0
        const baseChildren = parseFloat(document.getElementById("children-price").innerHTML) || 0
        const rent = baseRent * parseFloat(getSelectedValue("rent")) || 0
        const food = baseFood * parseFloat(getSelectedValue("food")) || 0
        const internet = baseInternet * parseFloat(getSelectedValue("internet")) || 0
        const transport = baseTransport * parseFloat(getSelectedValue("transport")) || 0
        const children = baseChildren * parseFloat(getSelectedValue("children")) * parseFloat(getSelectedValue("children-count")) || 0
        const totalLifeExpenses = children + transport + internet + food + rent
        const bankLoan = parseFloat(document.getElementById("bank-loan").value) || 0
        const bankPayment = bankLoan * 0.03
        //
        const lenderLoans = document.getElementsByClassName("lender-loan")
        const lenderPayments = document.getElementsByClassName("lender-payment")
        let totalLoan = bankPayment 
        if (lenderLoans.length == lenderPayments.length) {
            for (i = 0; i < lenderLoans.length; ++i) {
                const lenderLoan = parseFloat(lenderLoans[i].value) || 0
                const final = lenderLoan * 0.3
                lenderPayments[i].value = final.toFixed(2)
                totalLoan += final
            }
        } else {
            throw new Error("Wrong table scruct")
        }
        const totalExpenses = totalLifeExpenses + totalLoan
        //
        document.getElementById("food").value = food.toFixed(2)
        document.getElementById("rent").value = rent.toFixed(2)
        document.getElementById("internet").value = internet.toFixed(2)
        document.getElementById("transport").value = transport.toFixed(2)
        document.getElementById("children").value = children.toFixed(2)
        document.getElementById("total-expenses").value = totalLifeExpenses.toFixed(2)
        document.getElementById("bank-payment").value = bankPayment.toFixed(2)
        document.getElementById("total-loan-expenses").value = totalLoan.toFixed(2)
        document.getElementById("total-loan-counter").value = loanTableBody.rows.length - 1
        document.getElementById("total-monthly-expenses").value = totalExpenses.toFixed(2)
        return totalExpenses
    }

    function calculateBalance(totalIncome, totalExpenses) {
        const element = document.getElementById("balance")
        element.value = (totalIncome - totalExpenses).toFixed(2)
        if (totalIncome < totalExpenses) {
            element.classList.add('negative')
        } else {
            element.classList.remove('negative')
        }
    }
    function targetLabelUpdate() {
        const passiveTotalIncome = parseFloat(document.getElementById("total-passive-income").value) || 0
        const totalExpense = parseFloat(document.getElementById("total-monthly-expenses").value) || 0
        if (passiveTotalIncome > totalExpense) {
            document.getElementById('goal_ok').style.display = "block"; 
        } else {
            document.getElementById('goal_ok').style.display = "none"; 
        }
    }

    function calculateTotals() {
        updateBaseExpenses()
        calculateTrainings()
        calculateBalance(calculateIncomes(), calculateExpenses())
        targetLabelUpdate()
    }

    window.onload = function() {
        loadFormData()
        calculateTotals()
    }

    document.getElementById('clearCache').addEventListener('click', function() {
        localStorage.clear()
        location.reload()
    })

    document.getElementById("game-form").addEventListener("input", event => {
        calculateTotals()
        saveFormData()
    })
</script>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }
    
    .container {
        min-width: 510px;
        margin: 20px auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    
    h1 {
        text-align: center;
    }
    
    .section {
        margin-bottom: 20px;
    }
    
    .section h2 {
        border-bottom: 2px solid #ddd;
        padding-bottom: 10px;
    }
    
    .expense-category h3 {
        margin-bottom: 10px;
    }
    
    label {
        margin: 5px 0;
    }

    input[type="text"] {
        width: 90%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;        
    }

    input[type="number"] {
        width: 60px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    input[type="radio"] {
        display: none;
    }
    input[type="radio"] label {
        padding: 5px;
        cursor: pointer;
        appearance: button;
    }

    input[type="radio"]:checked + label {
        background-color: #007bff;
        color: #fff;
        border-color: #007bff;
    }

    input[type="checkbox"] {
        appearance: none;
        min-width: 20px;
        min-height: 20px;
        height: 100%;
        width: height;
        background-color: #ccc;
        border: none;
        cursor: pointer;
        outline: none;
    }

    input[type="checkbox"]:checked {
        background-color: #007bff;
    }

    select {
        width: 60px;
    }


    label.btn {
        display: inline-block;
        min-width: 30px;
        padding: 5px 5px;
        margin: 0 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
        background-color: #f8f8f8;
        transition: background-color 0.3s;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 10px;
    }
    
    table, th, td {
        border: 1px solid #ddd;
    }
    
    th, td {
        padding: 10px;
        text-align: center;
    }
    
    .total {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .total label {
        flex: 1;
    }
    
    .total input {
        flex: 2;
    }
    .inline {
        display: inline;
    }

    #status {
        display: block;
        margin-bottom: 20px;
    }
    #balance {
        font-size: x-large;
    }
    .negative {
        color:red;
    }
    #goal_ok {
        color: #700070;
        background-color: #028202;
        font-size: x-large;
        display: none;
    }
</style>
</html>
